import{r as n,H as h,j as e,L as u}from"./index-CfebaG3Z.js";import{A as y}from"./Header-Cr_AXXt8.js";import{A as k}from"./Sidebar-dRNJ5gtD.js";import{a as f}from"./axiosService-Cz6uC_ho.js";import{B as p,Q as w}from"./ReactToastify-Bua7Jxoa.js";import{F as v,a as C}from"./index-CIU4irJw.js";import"./logout-CT78rMfo.js";import"./toaster-CAIDXZc9.js";import"./index-pvCZGxFZ.js";import"./iconBase-BG7OcONe.js";import"./axios-B6xwUs71.js";import"./index-VWaDGczM.js";import"./Set_Get-jfIHgayU.js";import"./clsx-B-dksMZM.js";import"./index-CZpPKcfD.js";const A=()=>{const[t,a]=n.useState([]);return n.useEffect(()=>{f.get(h+"/department").then(({data:r})=>{a(r.departments)}).catch(r=>console.log(r))},[a]),{departments:t,setDepartments:a}},D=({serialNo:t,_id:a,departmentName:r,isListed:o})=>{const[s,c]=n.useState(o),[m,l]=n.useState(!1),[i,d]=n.useState(""),x=()=>{d(s?"block":"unblock"),l(!0)},b=()=>{const j=s?`${h}/block_department/${a}`:`${h}/unblock_department/${a}`;f.patch(j).then(g=>{if(g.data.success){c(!s);const N=s?"Department blocked successfully":"Department unblocked successfully";p.success(N,{position:"top-center",autoClose:3e3})}else p.error("Something went wrong, please try again.",{position:"top-center",autoClose:3e3})}).catch(()=>{console.error("An error occurred, please try again."),p.error("An error occurred, please try again.",{position:"top-center",autoClose:3e3})}).finally(()=>{l(!1)})};return e.jsxs(e.Fragment,{children:[m&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white p-6 rounded shadow-lg",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Confirm ",i==="block"?"Blocking":"Unblocking"]}),e.jsxs("p",{className:"mb-4",children:["Are you sure you want to ",i," the department?"]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{onClick:()=>l(!1),className:"mr-2 px-4 py-2 bg-gray-300 rounded",children:"Cancel"}),e.jsx("button",{onClick:b,className:"px-4 py-2 bg-green-500 text-white rounded",children:"Confirm"})]})]})}),e.jsxs("tr",{className:"bg-white border-b dark:bg-white dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-fuchsia-200",children:[e.jsx("td",{className:"px-6 py-4 text-left font-medium text-gray-900 whitespace-nowrap dark:text-gray-900 truncate",style:{maxWidth:"50px"},children:t}),e.jsx("td",{className:"px-6 py-4 text-left truncate",children:r}),e.jsx("td",{className:"px-6 py-4 text-left",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${s?"bg-green-700":"bg-red-600"}`}),e.jsx("p",{children:s?"Active":"Blocked"})]})}),e.jsx("td",{className:"px-6 py-4 text-left ",children:e.jsx("label",{className:"flex cursor-pointer select-none items-center ",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",checked:s,onChange:x,className:"sr-only"}),e.jsx("div",{className:`box block h-6 w-10 rounded-full  border border-black ${s?"bg-green-700":"bg-red-500"}`}),e.jsx("div",{className:`absolute left-1 top-1 flex h-4 w-4 items-center justify-center  rounded-full bg-black transition ${s?"translate-x-full":""}`})]})})}),e.jsx("td",{className:"px-6 py-4 text-left",children:e.jsx(u,{to:`/admin/department/${a}`,children:e.jsx(v,{icon:C,className:"text-fuchsia-500 hover:text-fuchsia-700 cursor-pointer"})})})]})]})},J=()=>{const[t,a]=n.useState(1),r=8,{departments:o}=A(),s=o.length,c=Math.ceil(s/r),m=o.slice((t-1)*r,t*r),l=()=>{t<c&&a(t+1)},i=()=>{t>1&&a(t-1)};return e.jsxs("div",{className:"flex h-screen",children:[e.jsx(k,{}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx(y,{}),e.jsxs("div",{className:"p-6",children:[e.jsx(w,{}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("span",{className:"text-2xl font-bold mb-4 text-center w-full text-fuchsia-950 ",children:"Department List"}),e.jsx(u,{to:"/admin/addDepartment",className:"ml-auto",children:e.jsx("button",{className:"px-4 py-2 bg-fuchsia-950 text-white rounded hover:bg-fuchsia-600 ",children:"Add_Department"})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table-auto w-3/4 mx-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-fuchsia-950 text-white",children:[e.jsx("th",{className:"px-6 py-3 text-left ",children:"Sl.No"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"status"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Action"})]})}),e.jsx("tbody",{children:m.map((d,x)=>n.createElement(D,{departmentName:"",isListed:!0,...d,key:d._id,serialNo:(t-1)*r+x+1}))})]})}),e.jsxs("div",{className:"flex justify-between mt-4",children:[e.jsx("button",{onClick:i,disabled:t===1,className:"px-4 py-2 bg-fuchsia-300 rounded disabled:opacity-50",children:"Previous"}),e.jsxs("span",{children:["Page ",t," of ",c]}),e.jsx("button",{onClick:l,disabled:t===c,className:"px-4 py-2 bg-fuchsia-300 rounded disabled:opacity-50",children:"Next"})]})]})]})]})};export{J as default};
