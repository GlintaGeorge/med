import{r as y,u as N,a as v,D as g,o as h,j as e,L as k,G as _}from"./index-CfebaG3Z.js";import{u as L}from"./formik.esm-u-DLBJw_.js";import{a as S}from"./validation-DHzXRGQZ.js";import{s as n}from"./toaster-CAIDXZc9.js";import{a as p}from"./axios-B6xwUs71.js";import{j as D}from"./index-VWaDGczM.js";import{s as l}from"./Set_Get-jfIHgayU.js";const I="/assets/b3-DLy2jUHP.jpg",F=()=>{const[x,d]=y.useState(!1),m=N(),u=v(),s=L({initialValues:{email:"",password:""},validate:S,onSubmit:({email:o,password:a})=>{d(!0),p.post(g+"/login",{email:o,password:a}).then(({data:r})=>{const{doctorName:t,role:i,_id:c}=r.doctor,{message:b,access_token:j,refresh_token:w}=r;u(h({isAuthenticated:!0,name:t,role:i,id:c})),l("access_token",j),l("refresh_token",w),n(b,"success"),setTimeout(()=>{m("/doctor")},1e3)}).catch(({response:r})=>{const{message:t}=r.data;d(!1),console.log(t),n(t,"error")})}});console.log(x);const f=o=>{p.post(g+"/google_signIn",{doctor:o}).then(({data:a})=>{const{message:r,user:t,access_token:i,refresh_token:c}=a;l("access_token",i),l("refresh_token",c),n(r,"success"),console.log(o),u(h({isAuthenticated:!0,name:t.doctorName,role:t.role,id:t._id})),m("/home")}).catch(({response:a})=>n(a.data.message,"error"))};return e.jsx("div",{className:"flex items-center justify-center h-screen bg-cover bg-center",style:{backgroundImage:`url(${I})`,opacity:100},children:e.jsxs("div",{className:"bg-gray-200 bg-opacity-50 shadow-lg rounded-lg p-8 mx-4",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6 text-center",children:"Login"}),e.jsxs("form",{onSubmit:s.handleSubmit,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"email",children:"Email"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"email",type:"email",placeholder:"Email",...s.getFieldProps("email")}),s.errors.email&&s.touched.email&&e.jsx("div",{className:"text-red-500",children:s.errors.email})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password",children:"Password"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"password",type:"password",placeholder:"Password",...s.getFieldProps("password")}),s.errors.password&&s.touched.password&&e.jsx("div",{className:"text-red-500",children:s.errors.password})]}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-8 mt-2 rounded focus:outline-none focus:shadow-outline",type:"submit",children:"Login"})})]}),e.jsxs("p",{className:"mt-2 ml-8 text-xs text-gray-700",children:["Don't have an account?",e.jsx(k,{to:"/doctor/signup",className:"text-blue-500 underline ml-1",children:"Sign Up"})]}),e.jsx("div",{className:"px-4 py-2 w-full  flex justify-center gap-2 ",children:e.jsx(_,{onSuccess:o=>{const a=D(o==null?void 0:o.credential);f(a)},onError:()=>{n("Login Failed","error")}})})]})})},C=()=>e.jsx(F,{});export{C as default};
