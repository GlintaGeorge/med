import{b as j,u as b,r as a,j as e,H as c}from"./index-DA7c_E-X.js";import{A as v}from"./Header-DTWCZNIh.js";import{A as N}from"./Sidebar-BuSkWbNm.js";import{a as l}from"./axiosService-Cn-l7JZq.js";import{s as y}from"./toaster-CDKtkdIq.js";import{u as w}from"./useDoctors-C83YiIkj.js";import"./logout-N69Hl7hh.js";import"./index-CAQ6KIhw.js";import"./iconBase-0wn4fA3J.js";import"./axios-B6xwUs71.js";import"./index-VWaDGczM.js";import"./Set_Get-jfIHgayU.js";const D=({doctors:n})=>{const{id:o}=j(),d=b(),[r,f]=a.useState(null),[h,i]=a.useState(!1),[m,u]=a.useState("");a.useEffect(()=>{(async()=>{try{const t=await l.get(`${c}/doctors/${o}`);f(t.data.doctor)}catch(t){console.error("Error fetching doctor details:",t)}})()},[o]);const x=async s=>{if(s==="rejected")i(!0);else try{const t=await l.patch(`${c}/verify_doctor/${o}`,{status:s});y(t.data.message,"success"),d("/admin/requesteddoctors")}catch(t){console.error("Error verifying doctor:",t)}},g=async()=>{try{const s=await l.patch(`${c}/verify_doctor_rejection/${o}`,{status:"rejected",reason:m});console.log(s.data.message),i(!1),d("/admin/requesteddoctors")}catch(s){console.error("Error rejecting doctor:",s)}};if(!r)return e.jsx("div",{children:"Loading..."});const p=n.findIndex(s=>s._id===r._id)+1;return e.jsx("div",{className:"flex justify-center items-center mt-10",children:e.jsxs("div",{className:"max-w-lg w-full bg-gray-100 p-8 rounded-lg shadow-lg",children:[e.jsxs("h2",{className:"text-2xl font-bold text-center mb-4",children:["Doctor Serial Number: ",p]}),e.jsx("img",{src:r.profileImage,alt:"Profile",className:"w-44 h-44 mx-auto rounded mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-center mb-4",children:r.doctorName}),e.jsx("p",{className:"text-gray-700 text-lg text-center mb-4",children:r.department}),e.jsxs("div",{className:"flex justify-center mb-4",children:[e.jsx("button",{onClick:()=>x("approved"),className:"bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 mr-4 rounded",children:"Approve"}),e.jsx("button",{onClick:()=>x("rejected"),className:"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded",children:"Reject"})]}),h&&e.jsx("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:e.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:e.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"â€‹"}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[e.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:e.jsx("div",{className:"sm:flex sm:items-start",children:e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Reason for Rejection"}),e.jsx("div",{className:"mt-2",children:e.jsx("textarea",{value:m,onChange:s=>u(s.target.value),className:"block w-full p-2 sm:text-sm border-gray-300 rounded-md",rows:4,placeholder:"Enter reason for rejection"})})]})})}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[e.jsx("button",{onClick:g,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-500 text-base font-medium text-white hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Confirm"}),e.jsx("button",{onClick:()=>i(!1),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})})]})})},q=()=>{const{doctors:n}=w();return e.jsxs("div",{className:"flex h-screen",children:[e.jsx(N,{}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx(v,{}),e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4 text-blue-950 mt-5 text-center",children:"Verification Page"}),e.jsx(D,{doctors:n})]})]})]})};export{q as default};
