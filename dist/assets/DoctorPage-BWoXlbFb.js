import{r as a,j as e,L as H,U as C}from"./index-CfebaG3Z.js";import{F as Q}from"./Footer-CvixlGO2.js";import{N as B}from"./Navbar-CBCnb-2C.js";import{a as P}from"./axiosService-Cz6uC_ho.js";import{a as J,b as O}from"./index-pvCZGxFZ.js";import{D as W}from"./index-BWnlB9Pt.js";/* empty css                         */import"./toaster-CAIDXZc9.js";import"./logo-CI8ZzsgX.js";import"./Set_Get-jfIHgayU.js";import"./iconBase-BG7OcONe.js";import"./axios-B6xwUs71.js";import"./index-VWaDGczM.js";import"./logout-CT78rMfo.js";import"./clsx-B-dksMZM.js";import"./startOfMonth-B9SniiPS.js";import"./format-BGxdoZw0.js";const q=()=>{const o=[];for(let r=9;r<=17;r++){const l=r>12?r-12:r,i=r+1>12?r-11:r+1,m=r>=12?"PM":"AM",g=r+1>=12?"PM":"AM";o.push({start:`${l}:00 ${m}`,end:`${i}:00 ${g}`})}return o},z=()=>{const[o,r]=a.useState([]),[l,i]=a.useState(""),[m,g]=a.useState(!1),[u,b]=a.useState(""),[d,v]=a.useState(null),[h,y]=a.useState(""),[N,k]=a.useState([]),[n,w]=a.useState(1),[p]=a.useState(8),[F,$]=a.useState(0),[A,S]=a.useState(!1),T=q();a.useEffect(()=>{(async()=>{try{const s=await P.get(`${C}/departments`);if(console.log("Department response:",s),s.data.success){const x=s.data.departments.filter(c=>c.isListed);k(x);const R=x.map(c=>c._id),j=await P.get(`${C}/doctors`,{params:{searchQuery:l,department:u,selectedDate:d?d.toISOString():null,selectedTimeSlot:h,page:n,limit:p}});console.log("Doctor response:",j);const D=j.data.doctors.filter(c=>R.includes(c.department)&&c.isApproved===!0);console.log("Filtered doctors:",D),r(D),$(Math.ceil(j.data.totalCount/p)),S(l!==""||u!==""||d!==null||h!=="")}else throw new Error("Failed to fetch department details")}catch(s){console.error("Error fetching doctors:",s)}})()},[l,u,d,h,n,p]),console.log(o,"Doctors list:");const _=t=>{i(t.target.value)},E=()=>{g(!m)},I=t=>{b(t.target.value)},L=t=>{v(t)},M=t=>{y(t.target.value)},U=()=>{i(""),b(""),v(null),y(""),w(1),S(!1)},f=t=>w(t);return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8 text-center md:text-left",children:"Find a Doctor"}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center md:justify-between mb-4",children:[e.jsx("div",{className:"relative mb-4 md:mb-0 w-full md:w-1/3",children:e.jsxs("div",{className:`border border-${m?"gray-300":"gray-500"} shadow-lg flex items-center relative rounded-md w-full`,children:[e.jsx("input",{type:"text",placeholder:"Search",value:l,onChange:_,className:"rounded-md px-4 py-2 w-full"}),e.jsx("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-700 cursor-pointer",onClick:E,children:e.jsx(J,{})})]})}),e.jsx("div",{className:"border border-gray-500 shadow-lg rounded-md w-full md:w-1/3 mx-0 md:mx-4 mb-4 md:mb-0",children:e.jsxs("select",{className:"rounded-md px-4 py-2 w-full",value:u,onChange:I,children:[e.jsx("option",{value:"",children:"All Departments"}),N.map(t=>e.jsx("option",{className:"text-gray-700",value:t._id,children:t.departmentName},t._id))]})}),e.jsx("div",{className:"border border-gray-500 shadow-lg rounded-md w-full md:w-1/3 mx-0 md:mx-4 mb-4 md:mb-0",children:e.jsxs("select",{className:"rounded-md px-4 py-2 w-full",value:h,onChange:M,children:[e.jsx("option",{value:"",children:"Select Time Slot"}),T.map((t,s)=>e.jsxs("option",{value:`${t.start} - ${t.end}`,children:[t.start," - ",t.end]},s))]})}),e.jsxs("div",{className:"border border-gray-500 shadow-lg rounded-md w-full md:w-1/3 mx-0 md:mx-4 relative",children:[e.jsx(W,{selected:d,onChange:L,className:"rounded-md px-4 py-2 w-full pl-10",minDate:new Date,placeholderText:"Select Date"}),e.jsx("div",{className:"absolute top-3 left-2 text-gray-700",children:e.jsx(O,{})})]}),A&&e.jsx("button",{className:"ml-4 mt-2 bg-fuchsia-900 hover:bg-fuchsia-800 text-white rounded-md px-4 py-2",onClick:U,children:"Clear Filters"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 ",children:o.map(t=>{var s;return e.jsx(H,{to:`/doctors/${t._id}`,children:e.jsxs("div",{className:"bg-gray-300 shadow-md rounded-lg p-6 cursor-pointer flex flex-col justify-center items-center hover:bg-gray-50 dark:hover:bg-fuchsia-200",children:[e.jsx("img",{src:t.profileImage,alt:"Doctor",className:"w-64 h-64 mx-auto rounded mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-center mb-2",children:t.doctorName}),e.jsx("p",{className:"text-gray-600 text-m font-medium text-center mb-2",children:((s=N.find(x=>x._id===t.department))==null?void 0:s.departmentName)||"Unknown Department"}),e.jsx("button",{className:"bg-fuchsia-800 hover:bg-fuchsia-800 text-white font-bold py-2 px-4 rounded mt-3",children:"Book Appointment"})]})},t._id)})}),e.jsx("div",{className:"mt-10 flex justify-center",children:e.jsx("ul",{className:"flex pl-0 list-none rounded my-2",children:Array.from({length:F},(t,s)=>e.jsx("li",{children:e.jsx("button",{className:`${n===s+1?"bg-fuchsia-900 text-white":"text-fuchsia-900 hover:text-fuchsia-700"} cursor-pointer px-3 py-2`,onClick:()=>f(s+1),children:s+1})},s))})}),e.jsxs("div",{className:"flex justify-center mt-4",children:[n>1&&e.jsx("button",{className:"bg-fuchsia-900 text-white py-2 px-4 rounded",onClick:()=>f(n-1),children:"Previous Page"}),o.length===p&&e.jsx("button",{className:"bg-fuchsia-900 text-white py-2 px-4 rounded ml-4",onClick:()=>f(n+1),children:"Next Page"})]})]})},me=()=>e.jsxs(e.Fragment,{children:[e.jsx(B,{}),e.jsx(z,{}),e.jsx(Q,{})]});export{me as default};
