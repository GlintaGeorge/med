import{r as N,u as v,a as k,U as x,s as h,j as e,L as p,G as _}from"./index-CfebaG3Z.js";import{u as L}from"./formik.esm-u-DLBJw_.js";import{a as d}from"./axios-B6xwUs71.js";import{s as l}from"./toaster-CAIDXZc9.js";import{a as S}from"./validation-DHzXRGQZ.js";import{j as A}from"./index-VWaDGczM.js";import{s as i}from"./Set_Get-jfIHgayU.js";import{A as F}from"./reg-BBFPtjdQ.js";d.defaults.withCredentials=!0;const I=()=>{const[f,m]=N.useState(!1),u=v(),g=k(),s=L({initialValues:{email:"",password:""},validate:S,onSubmit:({email:a,password:o})=>{m(!0),d.post(x+"/login",{email:a,password:o}).then(({data:t})=>{const{name:r,role:n,_id:c}=t.user,{message:j,access_token:w,refresh_token:y}=t;i("access_token",w),i("refresh_token",y),l(j,"success"),g(h({isAuthenticated:!0,name:r,role:n,id:c})),u("/")}).catch(({response:t})=>{var r;console.log(t),m(!1),l((r=t==null?void 0:t.data)==null?void 0:r.message,"error")})}}),b=a=>{d.post(x+"/google_signIn",{user:a}).then(({data:o})=>{const{message:t,user:r,access_token:n,refresh_token:c}=o;console.log(o),i("access_token",n),i("refresh_token",c),l(t,"success"),g(h({name:r.name,isAuthenticated:!0,role:r.role,id:r._id})),u("/")}).catch(({response:o})=>l(o.data.message,"error"))};return e.jsx("div",{className:"flex items-center justify-center bg-cover bg-center bg-no-repeat min-h-screen",style:{backgroundImage:`url(${F})`},children:e.jsx("div",{className:"flex",children:e.jsxs("div",{className:"w-96 p-8 bg-gray-300 bg-opacity-10 rounded-lg shadow-lg ml-8",children:[e.jsx("h2",{className:"font-extrabold text-teal-900 text-3xl mb-5 ml-28",children:"Login"}),e.jsxs("form",{onSubmit:s.handleSubmit,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"email",className:"block text-gray-700 mr-64",children:"Email:"}),e.jsx("input",{type:"text",id:"email",className:"w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:border-blue-500",...s.getFieldProps("email")}),s.errors.email&&s.touched.email&&e.jsx("div",{className:"text-red-500",children:s.errors.email})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"password",className:"block text-gray-700 mr-64",children:"Password:"}),e.jsx("input",{type:"password",id:"password",className:"w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:border-blue-500",...s.getFieldProps("password")}),s.errors.password&&s.touched.password&&e.jsx("div",{className:"text-red-500",children:s.errors.password}),e.jsx(p,{to:"/forgot-password",className:"text-gray-500 hover:underline block ml-48",children:"Forgot Password?"})]}),e.jsx("button",{type:"submit",className:"bg-teal-900 hover:bg-teal-500 text-white font-bold py-2 px-6 mt-4 rounded-lg focus:outline-none focus:shadow-outline ml-28",disabled:!!f,children:"Login"})]}),e.jsx("p",{className:"mt-2 text-xs text-gray-700 ml-24",children:"Don,t have an account?"}),e.jsx(p,{to:"/register",className:"text-blue-500 mt-2 text-xs ml-28 underline",children:"Create Account"}),e.jsx("div",{className:"px-4 py-2 w-full  flex justify-center gap-2 ",children:e.jsx(_,{onSuccess:a=>{const o=A(a==null?void 0:a.credential);b(o)},onError:()=>{l("Login Failed","error")}})})]})})})},V=()=>e.jsx(I,{});export{V as default};
