import{r as u,U as f,n as y,p as F,j as e}from"./index-AyN6017N.js";import{N as P}from"./Navbar-tIQjwYHW.js";import{F as S}from"./Footer-CyZoeMUy.js";import{a as x}from"./axiosService-WCFtW8_u.js";import{s as p}from"./toaster-BZcZoKtN.js";import{u as I}from"./uploadImages-IQzN17c-.js";import{M as C}from"./index-Cj4KBBM5.js";import"./logo-CI8ZzsgX.js";import"./Set_Get-jfIHgayU.js";import"./iconBase-CLBn-FAW.js";import"./axios-B6xwUs71.js";import"./index-VWaDGczM.js";import"./logout-BbMCICVU.js";const k=()=>{const[n,a]=u.useState(null),[d,t]=u.useState(null),[l,c]=u.useState({name:"",gender:"",age:null,phoneNumber:"",imageFile:null}),[N,j]=u.useState(null),[w,g]=u.useState(!1);return u.useEffect(()=>{x.get(f+"/profile").then(({data:i})=>{const{user:s}=i;a(s),c(r=>({...r,name:(s==null?void 0:s.name)||"",gender:(s==null?void 0:s.gender)||"",age:(s==null?void 0:s.age)||null,phoneNumber:(s==null?void 0:s.phoneNumber)||""}))}).catch(()=>p("Oops! Something went wrong","error"))},[]),{profile:n,formData:l,imagePreview:N,error:d,isSubmitting:w,handleInputChange:i=>{const{name:s,value:r}=i.target;let m="";if(s==="imageFile"){const o=i.target,h=o.files&&o.files[0];if(h){const b=new FileReader;b.onloadend=()=>{j(b.result)},b.readAsDataURL(h),c(v=>({...v,imageFile:h}))}}else{if(s==="name")r.trim()?y.test(r)||(m="First letter must be capital and no leading or trailing space"):m="Name is required";else if(s==="age"){const o=parseInt(r,10);(isNaN(o)||o<0)&&(m="Age must be a positive number")}else s==="phoneNumber"&&(r.trim()?F.test(r)||(m="Phone number must have 10 numbers"):m="Phone number is required");c(o=>({...o,[s]:s==="age"?parseInt(r,10):r}))}t(m)},handleSubmit:async()=>{if(!d){g(!0);const i=await I(l.imageFile);x.patch(f+"/profile/edit",{name:l.name,gender:l.gender,age:l.age,phoneNumber:l.phoneNumber,profilePicture:i||(n==null?void 0:n.profilePicture)}).then(({data:s})=>{p(s.message),g(!1)}).catch(()=>{g(!1),p("Oops! Something went wrong while updating profile","error")})}}}},E="/assets/w1-BYHYttPx.jpg",_=()=>{const{profile:n,formData:a,imagePreview:d,handleInputChange:t,handleSubmit:l}=k();return e.jsxs(e.Fragment,{children:[e.jsx(P,{}),e.jsx("h2",{className:"text-4xl font-bold mt-6 text-center text-fuchsia-950",children:"Profile"}),e.jsx("div",{className:"flex items-center justify-center bg-cover bg-center bg-no-repeat min-h-screen",style:{backgroundImage:`url(${E})`},children:e.jsxs("div",{className:"flex flex-col items-center w-full md:w-3/5 lg:w-2/5 bg-opacity-10 bg-white rounded-lg p-6 shadow-xl",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx("img",{src:d||((n==null?void 0:n.profilePicture)??"https://picsum.photos/200/"),alt:"Profile",className:"w-32 h-32 rounded-full border-4 border-gray-300 shadow-sm"}),e.jsxs("label",{htmlFor:"profile-image",className:"absolute bottom-0 right-0 bg-fuchsia-800 text-white rounded-full cursor-pointer border-2 border-white p-1",children:[e.jsx("input",{type:"file",id:"profile-image",name:"imageFile",className:"hidden",onChange:t}),e.jsx(C,{})]})]}),e.jsxs("div",{className:"w-full p-6 mb-3 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"name",className:"block text-white font-semibold",children:"Name:"}),e.jsx("input",{type:"text",id:"name",value:a.name,name:"name",onChange:t,className:"border border-gray-300 rounded-md px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"email",className:"block text-white font-semibold",children:"Email:"}),e.jsx("input",{type:"email",id:"email",name:"email",value:(n==null?void 0:n.email)??"",onChange:t,className:"border border-gray-300 rounded-md px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"age",className:"block text-white font-semibold",children:"Age:"}),e.jsx("input",{type:"number",id:"age",name:"age",value:(a==null?void 0:a.age)??"",onChange:t,className:"border border-gray-300 rounded-md px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:"block text-white font-semibold",children:"Phone Number:"}),e.jsx("input",{type:"tel",id:"phoneNumber",name:"phoneNumber",value:(a==null?void 0:a.phoneNumber)??"",onChange:t,className:"border border-gray-300 rounded-md px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"gender",className:"block text-white font-semibold",children:"Gender:"}),e.jsxs("select",{id:"gender",name:"gender",value:(a==null?void 0:a.gender)??"",onChange:t,className:"border border-gray-300 rounded-md px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{className:"text-gray-700",value:"male",children:"Male"}),e.jsx("option",{className:"text-gray-700",value:"female",children:"Female"}),e.jsx("option",{className:"text-gray-700",value:"others",children:"Others"})]})]}),e.jsx("button",{className:"bg-fuchsia-950 text-white py-2 px-4 mt-3 rounded-md hover:bg-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:l,children:"Update Profile"})]})]})}),e.jsx(S,{})]})};export{_ as default};
