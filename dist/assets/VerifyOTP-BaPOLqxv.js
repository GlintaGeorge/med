import{r as l,u as f,U as m,j as e}from"./index-CfebaG3Z.js";import{a as d}from"./axios-B6xwUs71.js";import{u as x}from"./formik.esm-u-DLBJw_.js";import{g as u,r as p}from"./Set_Get-jfIHgayU.js";import{s as r}from"./toaster-CAIDXZc9.js";const g=()=>{const[o,c]=l.useState(60),n=f(),a=x({initialValues:{otp:""},validate:({otp:t})=>{const s={};return/^\d{6}$/.test(t)||(s.otp="OTP must be exactly 6 digits"),t.trim().length||(s.otp="OTP is Required"),s},onSubmit:({otp:t})=>{const s=u("userId");if(console.log(s),s)d.post(m+"/verify_otp",{otp:t,userId:s}).then(({data:i})=>{r(i.message,"success"),p("userId"),setTimeout(()=>n("/login"),1e3)}).catch(({response:i})=>{r(i.data.message,"error")});else return r("something went wrong","error"),n("/login",{replace:!0})}});l.useEffect(()=>{const t=setInterval(()=>{o>0&&c(s=>s-1)},1e3);return()=>clearInterval(t)},[o]);const h=()=>{c(60);const t=u("userId");if(t)d.post(m+"/resend_otp",{userId:t}).then(({data:s})=>{r(s.message,"success")}).catch(({response:s})=>{r(s.data.message,"error")});else return r("something went wrong","error"),n("/login")};return e.jsx("div",{children:e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsxs("div",{className:"w-96 p-8 bg-gray-300 rounded-lg shadow-lg",children:[e.jsx("h2",{className:"font-extrabold text-fuchsia-900 text-3xl ml-20 mb-2",children:"Verify OTP"}),e.jsxs("p",{className:"mt-2 text-xs text-fuchsia-900 ml-12 mb-6",children:["Please enter the OTP that we send to the mail"," "]}),e.jsxs("form",{onSubmit:a.handleSubmit,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{type:"text",id:"otp",className:" mb-4 mt-3 w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:border-fuchsia-500",placeholder:"Enter verification code",...a.getFieldProps("otp")}),a.errors.otp&&a.touched.otp&&e.jsx("p",{className:"text-red-500 mt-1",children:a.errors.otp})]}),e.jsx("button",{type:"submit",className:"bg-fuchsia-900 ml-28 mt-3 hover:bg-fuchsia-800 text-white font-bold py-2 px-6 rounded-lg focus:outline-none focus:shadow-outline",children:"Verify"}),e.jsxs("p",{className:"mt-3 ml-20 text-xs text-gray-700",children:["Didn't receive OTP?"," ",e.jsxs("button",{className:"text-fuchsia-500 underline focus:outline-none hover:text-fuchsia-700",onClick:h,disabled:o!==0,children:["Resend OTP",e.jsx("span",{className:"font-medium",children:o!==0&&` (${o}s)`})]})]})]})]})})})},w=()=>e.jsx(g,{});export{w as default};
