import{b as g,r,j as e,D as n}from"./index-DA7c_E-X.js";import{N as j}from"./Navbar-B08Jjj6f.js";import{a as m}from"./axiosService-Cn-l7JZq.js";import{s as i}from"./toaster-CDKtkdIq.js";import"./logo-CI8ZzsgX.js";import"./axios-B6xwUs71.js";import"./index-VWaDGczM.js";import"./logout-N69Hl7hh.js";import"./Set_Get-jfIHgayU.js";const N=()=>{const{doctorId:l}=g(),[d,c]=r.useState(!1),[u,x]=r.useState([]),[t,o]=r.useState({doctorName:"",department:"",profileImage:"",status:"",rejectedReason:"",email:"",phoneNumber:"",description:"",education:"",experience:"",age:"",lisenceCertificate:""}),f=()=>{c(!0)},h=async a=>{a.preventDefault();try{const s=await m.put(`${n}/reapply_verification/${l}`,{status:"pending"});s.status>=200&&s.status<300?(i("Reapply of verification successful"),c(!1)):console.error("Failed to update doctor status")}catch(s){console.error("Error updating doctor status:",s)}};r.useEffect(()=>{(async()=>{try{const s=await m.get(`${n}/doctorDetails/${l}`);if(s.status>=200&&s.status<300)o(s.data.doctor);else throw new Error("Failed to fetch doctor details")}catch(s){console.error("Error fetching doctor details:",s)}})()},[l]),r.useEffect(()=>{(async()=>{try{const{data:s}=await m.get(n+"/departments");x(s.departments)}catch(s){console.error("Error fetching departments:",s),i("Oops! Something went wrong while fetching departments","error")}})()},[]);const p=()=>{const a=u.find(s=>s._id===t.department);return a?a.departmentName:"N/A"},b=()=>{switch(t.status){case"pending":return"text-orange-500";case"approved":return"text-green-500";case"rejected":return"text-red-500";default:return""}};return e.jsxs("div",{className:"flex items-center justify-center mb-16 mt-16",children:[e.jsxs("div",{className:"bg-gray-100 shadow-xl rounded-md p-12 md:w-4/12 w-full hover:bg-gray-200 hover:shadow-2xl transition duration-300",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center md:items-start md:justify-between mb-8",children:[e.jsx("img",{src:t.profileImage,alt:"Doctor",className:"w-48 h-48 rounded mb-4 md:mr-4"}),e.jsxs("div",{className:"mr-24 mt-16",children:[e.jsx("p",{className:"text-2xl font-semibold",children:t.doctorName}),e.jsx("p",{className:"text-gray-500",children:p()})]})]}),e.jsx("hr",{className:"my-4"}),e.jsxs("p",{className:`text-lg font-semibold ${b()}`,children:["Verification Status: ",t.status]}),t.status==="rejected"&&e.jsxs("p",{className:"text-red-500",children:["Rejected Reason: ",t.rejectedReason]}),t.status==="rejected"&&e.jsx("button",{className:"bg-fuchsia-800 text-white rounded-md px-4 py-2 mt-4",onClick:f,children:"Reapply"})]}),d&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white shadow-md rounded-md p-6 w-full max-w-lg mx-4 my-20 overflow-auto max-h-full",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Verification"}),e.jsxs("form",{onSubmit:h,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),e.jsx("input",{type:"text",id:"name",name:"name",value:t.doctorName,readOnly:!0,className:"mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:t.email,readOnly:!0,className:"mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),e.jsx("input",{type:"text",id:"phoneNumber",name:"phoneNumber",value:t.phoneNumber,onChange:a=>o({...t,phoneNumber:a.target.value}),className:"mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"education",className:"block text-sm font-medium text-gray-700",children:"Education"}),e.jsx("input",{type:"text",id:"education",name:"education",value:t.education,onChange:a=>o({...t,education:a.target.value}),className:"mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"medicalLicense",className:"block text-sm font-medium text-gray-700",children:"Medical License Image"}),e.jsx("img",{src:t.lisenceCertificate,alt:"Medical License",className:"mt-1 w-full"}),e.jsx("input",{type:"file",id:"medicalLicense",name:"medicalLicense",onChange:a=>o({...t,lisenceCertificate:a.target.value}),className:"mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"submit",className:"bg-fuchsia-800 text-white rounded-md px-4 py-2",children:"Apply"}),e.jsx("button",{type:"button",className:"text-sm text-fuchsia-800 hover:underline mt-2 ml-2",onClick:()=>c(!1),children:"Cancel"})]})]})]})})]})},R=()=>e.jsxs(e.Fragment,{children:[e.jsx(j,{}),e.jsx(N,{})]});export{R as default};
